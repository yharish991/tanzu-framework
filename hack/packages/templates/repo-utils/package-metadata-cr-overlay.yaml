#@ load("@ytt:data", "data")
#@ load("@ytt:overlay", "overlay")
#@ load("package-helpers.lib.yaml", "get_package_repository", "get_package")

#@ package_repository = get_package_repository(data.values.packageRepository)
#@ package = get_package(package_repository, data.values.packageName)
#@ packageSupportDescription = "Support provided by VMware for deployment on TKG 1.4+ clusters. Best-effort support for deployment on any conformant Kubernetes cluster. Contact support by opening a support request via VMware Cloud Services or my.vmware.com."

#@overlay/match by=overlay.subset({"kind":"PackageMetadata"}),expects=1
---
metadata:
  name: #@ "{}.{}".format(package.name, package_repository.domain)
  #@overlay/match expects="0+"
  #@overlay/remove
  namespace: ""
spec:
  #@overlay/match missing_ok=True
  supportDescription: #@ packageSupportDescription
